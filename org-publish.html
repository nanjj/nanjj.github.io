<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-11-26 二 00:12 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Publish Github Pages via Org Mode</title>
<meta name="generator" content="Org mode" />
<link rel="stylesheet" type="text/css" href="css/org.css" />
</head>
<body>
<div id="content">
<h1 class="title">Publish Github Pages via Org Mode</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgbfbf5f0">Customization</a></li>
<li><a href="#org97423a1">Get Css and Fonts</a></li>
<li><a href="#orgde85efd">The Project</a></li>
</ul>
</div>
</div>
<p>
Now switched from <a href="https://jekyllrb.com/">Jekyll</a>, <a href="https://gohugo.io/">Hugo</a> to Emacs Org Publish.
</p>

<div id="outline-container-orgbfbf5f0" class="outline-2">
<h2 id="orgbfbf5f0">Customization</h2>
<div class="outline-text-2" id="text-orgbfbf5f0">
<p>
First we need to customize variable <code>org-publish-project-alist</code>:
</p>

<div class="org-src-container">
<pre class="src src-lisp">(<span style="color: #e9b96e;">"blog"</span>
 <span style="color: #e090d7;">:base-directory</span> <span style="color: #e9b96e;">"."</span>
 <span style="color: #e090d7;">:publishing-directory</span> <span style="color: #e9b96e;">"."</span>
 <span style="color: #e090d7;">:base-extension</span> <span style="color: #e9b96e;">"org"</span>
 <span style="color: #e090d7;">:recursive</span> t
 <span style="color: #e090d7;">:publishing-function</span> org-html-publish-to-html
 <span style="color: #e090d7;">:headline-levels</span> 4
 <span style="color: #e090d7;">:auto-preamble</span> t
 <span style="color: #e090d7;">:section-numbers</span> nil
 <span style="color: #e090d7;">:makeindex</span> nil
 <span style="color: #e090d7;">:html-head-include-scripts</span> nil
 <span style="color: #e090d7;">:html-head-include-default-style</span> nil
 <span style="color: #e090d7;">:auto-sitemap</span> t
 <span style="color: #e090d7;">:sitemap-filename</span> <span style="color: #e9b96e;">"index.org"</span>
 <span style="color: #e090d7;">:sitemap-title</span> <span style="color: #e9b96e;">"Thatched Cottage"</span>
 <span style="color: #e090d7;">:sitemap-sort-files</span> anti-chronologically
 <span style="color: #e090d7;">:sitemap-format-entry</span> org-publish-sitemap-time-entry
 <span style="color: #e090d7;">:html-postamble</span> nil)
</pre>
</div>

<p>
My <code>sitemap-format-entry</code>, add timestamp before the sitemap entry:
</p>

<div class="org-src-container">
<pre class="src src-lisp">(<span style="color: #b4fa70;">defun</span> <span style="color: #fce94f;">org-publish-sitemap-time-entry</span> (entry style project)
  (format <span style="color: #e9b96e;">"%s %s"</span>
          (format-time-string
           <span style="color: #e9b96e;">"[%Y-%m-%d %a %H:%s]"</span>
           (org-publish-find-date entry project))
          (org-publish-sitemap-default-entry entry style project)))
</pre>
</div>

<p>
Set <code>org-html-head</code> to(<code>customize-variable org-html-head</code>) to use my
<code>org.css</code>:
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #fce94f;">link</span> <span style="color: #fcaf3e;">rel</span>=<span style="color: #e9b96e;">"stylesheet"</span> <span style="color: #fcaf3e;">type</span>=<span style="color: #e9b96e;">"text/css"</span> <span style="color: #fcaf3e;">href</span>=<span style="color: #e9b96e;">"css/org.css"</span> /&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org97423a1" class="outline-2">
<h2 id="org97423a1">Get Css and Fonts</h2>
<div class="outline-text-2" id="text-org97423a1">
<p>
I must put the fonts local because most people living here can not
access google fonts service directly.  Get the css and fonts from
Below:
</p>

<ol class="org-ol">
<li><a href="./css/org.css">org.css</a>,</li>
<li><a href="./css/fonts.css">fonts.css</a>,</li>
<li><a href="./css/DroidSans.ttf">DroidSans.ttf</a>,</li>
<li><a href="./css/DroidSansMono.ttf">DroidSansMono.ttf</a>,</li>
<li><a href="./css/DroidSerif.ttf">DroidSerif.ttf</a>.</li>
</ol>
</div>
</div>
<div id="outline-container-orgde85efd" class="outline-2">
<h2 id="orgde85efd">The Project</h2>
<div class="outline-text-2" id="text-orgde85efd">
<pre class="example">
.
├── .git
├── .nojekyll
├── README.md
├── css
│   ├── DroidSans.ttf
│   ├── DroidSansMono.ttf
│   ├── DroidSerif.ttf
│   ├── fonts.css
│   └── org.css
├── dummynet.html
├── dummynet.org
├── growfs.html
├── growfs.org
├── hdiutil.html
├── hdiutil.org
├── index.html
├── index.org
├── org-publish.html
└── org-publish.org
</pre>
</div>
</div>
</div>
</body>
</html>
