<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-12-07 六 23:31 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Gitlab的持续集成</title>
<meta name="generator" content="Org mode" />
<link rel="stylesheet" type="text/css" href="css/org.css" />
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="sitemap.html"> SITEMAP </a>
 |
 <a accesskey="H" href="index.html"> HOME </a>
</div><div id="content">
<header>
<h1 class="title">Gitlab的持续集成</h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org10faa81">Github的持续集成</a></li>
<li><a href="#org2cb8752">Gitlab如何做的</a></li>
<li><a href="#org602b8d6">Gitlab Runner的行为</a></li>
</ul>
</div>
</nav>
<p>
Gitlab持续集成采用订阅模式，这和Github不同。
</p>

<div id="outline-container-org10faa81" class="outline-2">
<h2 id="org10faa81">Github的持续集成</h2>
<div class="outline-text-2" id="text-org10faa81">
<p>
Github的持续集成采用通知机制，需要实现一个Webhook来接收Github的通知。
</p>

<p>
如下图所示：
</p>


<figure>
<img src="github-ci.png" alt="github-ci.png" />

</figure>

<p>
这个Webhook是一个服务，Github得能访问访问到这个服务，事情才能完成。
而且这个服务的安全也得保证。
</p>

<p>
Gitlab不是这么做的。
</p>
</div>
</div>
<div id="outline-container-org2cb8752" class="outline-2">
<h2 id="org2cb8752">Gitlab如何做的</h2>
<div class="outline-text-2" id="text-org2cb8752">
<p>
Gitlaby用订阅的模式来做持续集成。
</p>


<figure>
<img src="gitlab-ci.png" alt="gitlab-ci.png" />

</figure>

<p>
这样 <code>gitlab runner</code> 可以跑在内网的某台机器，只要该机器http协议能访
问gitlab就可以。
</p>
</div>
</div>

<div id="outline-container-org602b8d6" class="outline-2">
<h2 id="org602b8d6">Gitlab Runner的行为</h2>
<div class="outline-text-2" id="text-org602b8d6">
<p>
<code>Gitlab Runner</code> 每3秒访问一下Gitlab看有没有任务，如有任务，扯下来执
行。如无任务，3秒后见。
</p>

<p>
<code>Gitlab Runner</code> 后面可以跑docker， kubernetes等。我觉得通过 <code>Gitlab
   Runner</code> 的shell模式没准可以跑lxd。
</p>
</div>
</div>
</div>
</body>
</html>
